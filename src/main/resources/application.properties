# ----------------------------------------------------------
# Server Port Configuration
# ----------------------------------------------------------
server.port=8090
# Spring Boot application will run on port 8090 instead of default 8080.


# ----------------------------------------------------------
# Producer Bootstrap Server (Commented Example)
# ----------------------------------------------------------
#spring.kafka.producer.bootstrap-servers=localhost:9092
# (COMMENTED OUT) Example showing how to configure a local Kafka broker.
# Use this when Kafka is running locally on port 9092.


# ----------------------------------------------------------
# Producer Bootstrap Server (Active Property)
# ----------------------------------------------------------
spring.kafka.producer.bootstrap-servers=172.30.177.3:9092
# Kafka broker address that the producer connects to for sending messages.
# Producer uses this broker to publish messages to Kafka topics.


# ----------------------------------------------------------
# Global Kafka Bootstrap Servers
# ----------------------------------------------------------
spring.kafka.bootstrap-servers=172.30.177.3:9092
# Common bootstrap servers for all Kafka components (producer, consumer, admin).
# Acts as a fallback if a specific component's bootstrap configuration is missing.


# ----------------------------------------------------------
# Kafka Admin Bootstrap Servers
# ----------------------------------------------------------
spring.kafka.admin.bootstrap-servers=172.30.177.3:9092
# Kafka broker used by the KafkaAdmin client.
# Responsible for:
#   - Creating topics
#   - Checking topic metadata
#   - Fetching broker and partition details


# ----------------------------------------------------------
# Kafka Consumer Bootstrap Servers
# ----------------------------------------------------------
spring.kafka.consumer.bootstrap-servers=172.30.177.3:9092
# Kafka broker address used by the consumer for reading data from topics.
# Consumers subscribe and poll messages from this server.


# ----------------------------------------------------------
# Producer Key Serializer
# ----------------------------------------------------------
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
# Serializes the Kafka message KEY into byte[] format.
# Stores the key as a string in Kafka.


# ----------------------------------------------------------
# Producer Value Serializer
# ----------------------------------------------------------
spring.kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer
# Serializes Java objects into JSON, then into byte[] before sending.
# Allows sending Java POJOs directly as JSON messages.


# ----------------------------------------------------------
# Multiple Bootstrap Servers Example (Commented)
# ----------------------------------------------------------
# To add more bootstrap-servers use the below syntax
# spring.kafka.producer.bootstrap-servers=localhost:9092,localhost:9093
# Example for configuring multiple Kafka brokers in a cluster for high availability.


# ----------------------------------------------------------
# Kafka Admin Bootstrap Server (Commented Example)
# ----------------------------------------------------------
#spring.kafka.admin.bootstrap-servers=localhost:9092
# (COMMENTED OUT) Example of pointing Kafka Admin client to a local broker.
# Kept only as reference.


# ----------------------------------------------------------
# Auto Topic Creation
# ----------------------------------------------------------
spring.kafka.admin.auto-create=true
# Automatically creates Kafka topics at application startup if they do not exist.
# Very useful in development; avoid enabling in production.


# ----------------------------------------------------------
# Producer Acknowledgement Level
# ----------------------------------------------------------
spring.kafka.producer.acks=all
# Ensures all in-sync replicas acknowledge a message.
# Highest durability and guarantees no message loss.
# Equivalent to "acks=-1" in native Kafka.


# ----------------------------------------------------------
# Producer Retry Attempts
# ----------------------------------------------------------
spring.kafka.producer.retries=10
# Number of retry attempts if message sending fails.
# Helps handle temporary network or broker issues.


# ----------------------------------------------------------
# Retry Backoff Time
# ----------------------------------------------------------
spring.kafka.producer.properties.retry.backoff.ms=1000
# Wait time between retry attempts.
# Producer waits 1 second before each retry.


# ----------------------------------------------------------
# Delivery Timeout for Producer
# ----------------------------------------------------------
#spring.kafka.producer.properties.delivery.timeout.ms=12000
spring.kafka.producer.properties.delivery.timeout.ms=60000
# Maximum allowed time for the producer to successfully deliver a message.
# Includes:
#   - retries
#   - backoff delays
#   - request timeout
# If the message is not delivered within 12 seconds, the send operation fails.


# ----------------------------------------------------------
# Linger Time for Batching
# ----------------------------------------------------------
spring.kafka.producer.properties.linger.ms=0
# Time the producer waits to accumulate messages into a batch.
# 0 ms = send messages immediately without waiting.


# ----------------------------------------------------------
# Producer Request Timeout
# ----------------------------------------------------------
spring.kafka.producer.properties.request.timeout.ms=30000
# Maximum time the producer waits for a response from the Kafka broker.
# If no response within 30 seconds, the request is considered failed.

# ----------------------------------------------------------
# Idempotent Producer (Exactly-once per message)
# ----------------------------------------------------------
spring.kafka.producer.properties.enable.idempotence=true
# Enables Kafka producer idempotence.
# Ensures the producer never writes duplicate messages even during retries.
# Guarantees: no duplicates + ordering + safe retries.
# Requires:
#   - acks=all
#   - retries > 0
#   - max.in.flight.requests.per.connection â‰¤ 5 (for message ordering)


# ----------------------------------------------------------
# Max In-flight Requests per Connection
# ----------------------------------------------------------
spring.kafka.producer.properties.max.in.flight.requests.per.connection=5
# Maximum number of unacknowledged requests sent in parallel to the broker.
# When idempotence is enabled, this MUST be 5 or less.
# Prevents out-of-order message delivery during retries.
# High values may cause ordering issues; 5 ensures idempotent safety.

# ----------------------------------------------------------
# Key Deserializer (Consumer)
# ----------------------------------------------------------
spring.kafka.producer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer
# Converts the incoming message key (byte array from Kafka) back into a String.
# Required when the producer originally sent the key using StringSerializer.
# Ensures correct partition-based routing interpretation on the consumer side.
# Common usage: reading keys like "product-101" or "order-501".

# ----------------------------------------------------------
# Value Deserializer (Consumer) - JSON
# ----------------------------------------------------------
spring.kafka.consumer.value-deserializer=org.springframework.kafka.support.serializer.JsonDeserializer
# Converts JSON-formatted Kafka message values into Java objects (POJOs).
# Works with Spring Kafka to automatically deserialize events (e.g., ProductCreatedEvent).
# Ensures strong schema mapping between producer JSON and consumer Java classes.
# Useful for microservices exchanging structured domain events.

# ----------------------------------------------------------
# Consumer Group ID
# ----------------------------------------------------------
spring.kafka.consumer.group-id=product-created-events
# Identifies the consumer group this service belongs to.
# All consumers in the same group share the load and read partitions cooperatively.
# Guarantees each event is consumed by EXACTLY ONE instance within the group.
# Changing the group-id creates a new consumer group and re-processes all events.

# ----------------------------------------------------------
# Trusted Packages for JSON Deserialization
# ----------------------------------------------------------
spring.kafka.consumer.properties.spring.json.trusted.packages=*
# Allows JsonDeserializer to deserialize messages into classes from any package.
# Required when event classes are located in multiple modules or packages.
# WARNING:
#   Using "*" is convenient but not secure in shared environments.
#   In production, specify ONLY the packages that contain your event models.
# Example (more secure):
#   com.ratnakar.kafka.model, com.ratnakar.events
